VERSION 3

SCHEMA >
    `ownerEmail` String `json:$.ownerEmail`,
    `threadId` String `json:$.threadId`,
    `gmailMessageId` String `json:$.gmailMessageId`,
    `from` String `json:$.from`,
    `to` String `json:$.to`,
    `subject` String `json:$.subject`,
    `timestamp` Int64 `json:$.timestamp`,
    `hasUnsubscribe` UInt8 `json:$.hasUnsubscribe`,
    `read` UInt8 `json:$.read`,
    `sent` UInt8 `json:$.sent`,
    `draft` UInt8 `json:$.draft`,
    `inbox` UInt8 `json:$.inbox`

ENGINE "ReplacingMergeTree"
ENGINE_SORTING_KEY "ownerEmail", "gmailMessageId"
ENGINE_PARTITION_KEY "toYYYYMM(fromUnixTimestamp64Milli(timestamp))"